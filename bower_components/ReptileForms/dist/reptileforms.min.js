/*! ReptileForms - v0.1.14 - 2014-07-01 */!function($,window,document,undefined){ReptileForm=function(a,b){this.forms=a,$(a).each(function(){$(this).data("reptile-form",new rf($(this),b))})},ReptileForm.prototype.customValidation=function(a,b){$(this.forms).each(function(){$(this).data("reptile-form")[a]=b})},rf=function(a,b){var c=this;return c.el=a,c.el.length?(c.settings=$.extend({method:"POST",action:window.location,useAjax:!0,reptileValidation:!0,expressions:{email:{rule:"/^[a-zA-Z0-9._-]+@[\\.a-zA-Z0-9-]+\\.[a-zA-Z.]{2,5}$/",msg:"Invalid Email."},password:{rule:"/^[\\040-\\176]{6,30}$/",msg:"Invalid Password, Must be between 6 and 30 characters."}},ready:function(){},beforeValidation:function(){},validationError:function(){},beforeSubmit:function(){},submitSuccess:function(){},submitError:function(){}},b),c.settings.reptileValidation&&c.el.attr("novalidate","novalidate"),c.clearErrors(),c.clearValues(),c.el.attr("method")||c.el.attr("method",c.settings.method),c.el.attr("action")||c.el.attr("action",c.settings.action),c.el.children("input, select, textarea, .field-input").each(function(){if($(this).parents(".field").length)return!1;var a=$(this);switch(!0){case"hidden"==a.attr("type"):c.renderFieldHidden(a);break;case a.hasClass("field-input"):a.replaceWith(c.renderCustomField(a));break;default:a.replaceWith(c.renderField(a))}}),c.el.on("submit",function(){return $.isFunction(c.settings.beforeValidation)&&!1===c.settings.beforeValidation.call(c)?!1:c.validate()?c.settings.useAjax?$.isFunction(c.settings.beforeSubmit)&&!1===c.settings.beforeSubmit.call(c)?!1:(c.submitForm.call(c,c.el.attr("action"),c.getValues()),!1):!0:!1}),void($.isFunction(c.settings.ready)&&c.settings.ready.call(c))):!1},rf.prototype.renderField=function(a){var b=a.attr("name"),c=a.attr("title")||null,d=Boolean(a.attr("required")),e=a.data("exp-name")||null,f=a.data("custom-validation")||null;if(!b)return console.error("Field removed, requires name."),null;var g=$(a[0].outerHTML);g.removeAttr("title data-exp-name");var g=$(document.createElement("div")).addClass("field-input").html(g),h="";switch(a[0].tagName.toLowerCase()){case"select":h="select";break;case"textarea":h="textarea";break;case"input":default:h="text"}return $(document.createElement("div")).data("name",b).data("title",c?c:b).data("exp-name",e).data("custom-validation",f).data("required",d).addClass("field").addClass(b).addClass(d?"required":null).addClass(h).append(c?'<div class="title">'+c+"</div>":null).append(g)},rf.prototype.renderCustomField=function(a){var b=a.data("type");switch(b!==undefined&&b.toLowerCase()){case"radio-group":var c=a.find('input[type="radio"]').first(),d=c.attr("name"),e=Boolean(c.attr("required")),f="validateRadioGroup";break;case"checkbox-group":var c=a.find('input[type="checkbox"]').first(),d=c.attr("name"),e=Boolean(c.attr("required")),f="validateCheckboxGroup";break;default:var d=a.data("name")||null,e=Boolean(a.data("required")),f=a.data("custom-validation")||null}var g=a.attr("title")||d;if(!d)return console.error("Input field removed from form. Name is required."),null;var h=$(a[0].outerHTML);return h.removeAttr("data-title data-name data-required data-exp-name data-type data-custom-validation"),$(document.createElement("div")).data("name",d).data("title",g).data("custom-validation",f).data("required",e).addClass("field").addClass(d).addClass(e?"required":null).addClass(b).append(g?'<div class="title">'+g+"</div>":null).append(h)},rf.prototype.renderFieldHidden=function(a){var b=a.attr("name"),c=b,d=Boolean(a.attr("required"));return b?(a.addClass("field").addClass(b).data("name",a.attr("name")).data("title",c).data("required",d),a.prop("outerHTML")):(console.error("Field removed, requires name."),null)},rf.prototype.validate=function(){var self=this;return self.clearErrors(),self.clearValues(),self.el.find(".field").each(function(){var value="",formField=$(this),title=formField.data("title"),name=formField.data("name"),customValidation=formField.data("custom-validation");if(customValidation&&$.isFunction(self[customValidation]))return value=self[customValidation](formField),void self.storeValue(name,value);if(value=self.getFieldValue(formField),self.storeValue(name,value),formField.data("required")&&!value)return void self.addError(name,title,"Value is required");var expName=formField.data("exp-name");if(expName&&self.settings.expressions){var expression=self.settings.expressions[expName];expression&&expression.rule&&!eval(expression.rule).test(value)&&self.addError(name,title,expression.msg)}}),$.isEmptyObject(self.getErrors())?!0:($.isFunction(self.settings.validationError)&&self.settings.validationError.call(self,self.getErrors()),!1)},rf.prototype.getFieldValue=function(a){var b=a.data("name");if(!b)return console.error("Cannot retreive value from field. Name is required."),null;var c;switch(!0){case a.attr("type")&&"hidden"==a.attr("type").toLowerCase():c=a.val();break;default:c=a.find("input, select, textarea").val()||null}return c},rf.prototype.validateRadioGroup=function(a){var b=a.find("input:checked").val(),c=a.data("name");return this.storeValue(c,b),a.data("required")&&!b?(this.addError(c,a.data("title"),"Value Is Required"),!1):b},rf.prototype.validateCheckboxGroup=function(a){var b=$('input[type="checkbox"]:checked').map(function(){return $(this).val()}).get(),c=a.data("name");return this.storeValue(c,b),a.data("required")&&!b.length?(this.addError(c,a.data("title"),"Value Is Required"),!1):b},rf.prototype.submitForm=function(a,b){var c=this;$.ajax({cache:!1,type:"POST",dataType:"JSON",url:a,data:b,success:function(a){$.isFunction(c.settings.submitSuccess)&&c.settings.submitSuccess.call(c,a)},error:function(a,b,d){$.isFunction(c.settings.submitError)&&c.settings.submitError.call(c,a,b,d)}})},rf.prototype.addError=function(a,b,c){this.formErrors.push({name:a,title:b,msg:c})},rf.prototype.clearErrors=function(){this.formErrors=[]},rf.prototype.getErrors=function(){return this.formErrors},rf.prototype.storeValue=function(a,b){this.formValues[a]=b},rf.prototype.clearValues=function(){this.formValues={}},rf.prototype.getValues=function(){return this.formValues}}(jQuery,window,document);